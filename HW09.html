<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ammar Plumber, Elaina Lin, Kim Nguyen, Meghan Aines, Ryan Karbowicz" />


<title>Homework 9 - Alligators</title>

<script src="site_libs/header-attrs-2.7/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Elainalytics</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="HW09.html">HW 09</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Homework 9 - Alligators</h1>
<h4 class="author">Ammar Plumber, Elaina Lin, Kim Nguyen, Meghan Aines, Ryan Karbowicz</h4>
<h4 class="date">4/13/2021</h4>

</div>


<div id="i.-introduction" class="section level2">
<h2>I. Introduction</h2>
<p>Social media has evolved and affected our lives in many aspects. In this assignment, we aim to have a closer look at two of the most popular social media platforms: Tiktok and Facebook. These platforms are in a similar industry but with very different target audiences, thus the two brands and their audiences could differ in their communication styles and language. Understanding the language used in these platforms may lead to their business implications and directions.</p>
<p>Our research question examines whether there are differences in sentiments of tweet communications that mention Tiktok and Facebook accounts.</p>
</div>
<div id="ii.-methodology" class="section level2">
<h2>II. Methodology</h2>
<p>Our method of sentiments analysis is text mining with R.</p>
<p>First, after getting tweets from twitter, we use basic tools of data exploration to transform, visualize, and examine different features of the datasets, such as source, time, length, and content (e.g, link and picture) of the tweets. We produce bar charts to visualize the most popular words used by each twitter account, as well as the most popular sentiments associated with tweets that each account produces. A wordcloud also helps paint a clearer picture of each company’s most commonly used words.</p>
<p>Second, we transform the datasets into tidy text format for sentiment analysis. The two main lexicons that we use are nrc and affin.</p>
<p>Finally, we run 4 different models to predict if a tweet was posted by either Facebook or Tiktok. The inputs of these models are the length of the tweet, as well as sentiment (which includes anger, anticipation, disgust, negative, postive, trust, joy, surprise, fear and sadness).</p>
<p>The first model is a Simple Decision Tree, the second model is a Bagging Model, the third model is a Random Forest and the fourth model is a Gradient Boosting Model.</p>
<p>Our results include a sum of squares analysis on the test set of data to determine which models have the smallest differences between the predicted tweeter and actual tweeter. We also include confusion matrices on the test set of data to analyze the prediction accuracy of the 4 models.</p>
<pre class="r"><code>#Loading packages.
library(rtweet)
library(tidyverse)
library(lubridate)
library(scales)
library(tidytext)
library(wordcloud)
library(textdata)

library(caret)       # for general model fitting
library(rpart)       # for fitting decision trees
library(rpart.plot)
library(ipred)       # for fitting bagged decision trees
library(ranger)
library(gbm)
library(vip)
library(kableExtra)</code></pre>
<pre class="r"><code>#Getting tweets

# Run these two lines to get the tweets 
# and then save them as a csv for future use
# tiktok &lt;- get_timeline(&quot;tiktok_us&quot;, n=3200)
# tiktok %&gt;% write_as_csv(&#39;tiktok.csv&#39;)
# 
# facebook &lt;- get_timeline(&quot;Facebook&quot;, n=3200)
# facebook %&gt;% write_as_csv(&quot;facebook.csv&quot;)

tiktok &lt;-
  read_csv(&#39;tiktok.csv&#39;) %&gt;% 
  select(status_id, source, text, created_at)

facebook &lt;-
  read_csv(&#39;facebook.csv&#39;) %&gt;% 
  select(status_id, source, text, created_at)

nrc &lt;- read_rds(&quot;nrc.rds&quot;)

facebook %&gt;% head()</code></pre>
<pre><code>## # A tibble: 6 x 4
##   status_id      source    text                              created_at         
##   &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;                             &lt;dttm&gt;             
## 1 x138202008034~ Twitter ~ &quot;Ramadan Mubarak &lt;U+0001F319&gt;\r\~ 2021-04-13 17:17:18
## 2 x138173442901~ Khoros CX &quot;@MeenalK1 Hi Meenal. Do you hav~ 2021-04-12 22:22:13
## 3 x138173338263~ Khoros CX &quot;@Afrojalipro Thanks for updatin~ 2021-04-12 22:18:04
## 4 x138173266838~ Khoros CX &quot;@CallandManning Hi Calland. If ~ 2021-04-12 22:15:14
## 5 x138171137687~ Khoros CX &quot;@BHARTINANDAN4 Hello! Please vi~ 2021-04-12 20:50:37
## 6 x138171054847~ Khoros CX &quot;@weathermatt22 Hi Matt. Please ~ 2021-04-12 20:47:20</code></pre>
<pre class="r"><code>facebook %&gt;%
  count(source, hour = hour(with_tz(created_at, &quot;EST&quot;))) %&gt;%
  mutate(percent = n/sum(n)) %&gt;%
  ggplot(aes(x = hour, y = percent, color = source)) +
  labs(x = &quot;Hour of day (EST)&quot;, y = &quot;% of tweets&quot;, color = &quot;&quot;) + 
  scale_y_continuous(labels = percent_format()) +
  geom_line() +
  ggtitle(&#39;Facebook Source Breakdown by Hour&#39;)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>tiktok %&gt;%
  count(source, hour = hour(with_tz(created_at, &quot;EST&quot;))) %&gt;%
  mutate(percent = n/sum(n)) %&gt;%
  ggplot(aes(x = hour, y = percent, color = source)) +
  labs(x = &quot;Hour of day (EST)&quot;, y = &quot;% of tweets&quot;, color = &quot;&quot;) + 
  scale_y_continuous(labels = percent_format()) +
  geom_line() +
  ggtitle(&#39;Tiktok Source Breakdown by Hour&#39;)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-4-2.png" width="672" /> These above figures indicate Tiktok/Facebook breakdown by hour. Across sources, the “busiest” time on both platforms are from 12:00 to 20:00. While Khoros Publishing has the most tweets about Facebook with its peak around 16:00, Twitter Web App and Fan Experiences (peaks around 16:00) are the main source of tweets about Tiktok.</p>
<pre class="r"><code>fb_wordcounts &lt;- 
  facebook %&gt;%
  mutate(tweetLength = str_length(text)) %&gt;% 
  filter(tweetLength &lt; 500)

tiktok_wordcounts &lt;- 
  tiktok %&gt;%
  mutate(tweetLength = str_length(text)) %&gt;% 
  filter(tweetLength &lt; 500)

writeLines(c(paste0(&quot;Facebook Mean Tweet Length: &quot;, 
                  mean(fb_wordcounts$tweetLength)), 
           paste0(&quot;TikTok Mean Tweet Length: &quot;, 
                  mean(tiktok_wordcounts$tweetLength))))</code></pre>
<pre><code>## Facebook Mean Tweet Length: 163.370231394622
## TikTok Mean Tweet Length: 112.916405760801</code></pre>
<pre class="r"><code>hist(tiktok_wordcounts$tweetLength)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>hist(fb_wordcounts$tweetLength)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-5-2.png" width="672" /></p>
<p>In terms of tweet length, a typical tweet related to Tiktok has from 50 to 100 words. There are less tweets that has more than 100 words. A typical tweet related to Facebook has around 150 words.</p>
<pre class="r"><code>fb_picture_counts &lt;- 
  facebook %&gt;%
  filter(!str_detect(text, &#39;^&quot;&#39;)) %&gt;%
  count(picture = ifelse(str_detect(text, &quot;t.co&quot;),
                         &quot;Picture/link&quot;, &quot;No picture/link&quot;))

tiktok_picture_counts &lt;- 
  tiktok %&gt;%
  filter(!str_detect(text, &#39;^&quot;&#39;)) %&gt;%
  count(picture = ifelse(str_detect(text, &quot;t.co&quot;),
                         &quot;Picture/link&quot;, &quot;No picture/link&quot;))

barplot(fb_picture_counts$n, 
        names.arg=c(&quot;No picture/link&quot;, &quot;Picture/link&quot;),
        main = &quot;Facebook # of Tweets with and without pics/link&quot;)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>barplot(tiktok_picture_counts$n, 
        names.arg=c(&quot;No picture/link&quot;, &quot;Picture/link&quot;),
        main = &quot;Tiktok # of Tweets with and without pics/link&quot;)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-6-2.png" width="672" /></p>
<p>Facebook tweets that contains pictures or links are more common than ones that have no pictures or links. There are no remarakble differences between tweets that contain picture/link and ones that don’t contains picture/link from Tiktok.</p>
<pre class="r"><code>reg &lt;- &quot;([^A-Za-z\\d#@&#39;]|&#39;(?![A-Za-z\\d#@]))&quot;

# Unnest the text strings into a data frame of words
fb_words &lt;- 
  facebook %&gt;%
  filter(!str_detect(text, &#39;^&quot;&#39;)) %&gt;%
  mutate(text = str_replace_all(text, 
                                &quot;https://t.co/[A-Za-z\\d]+|&amp;amp;&quot;, 
                                &quot;&quot;)) %&gt;%
  unnest_tokens(word, text, 
                token = &quot;regex&quot;, 
                pattern = reg) %&gt;%
  filter(!word %in% stop_words$word,
         str_detect(word, &quot;[a-z]&quot;))

tiktok_words &lt;- 
  tiktok %&gt;%
  filter(!str_detect(text, &#39;^&quot;&#39;)) %&gt;%
  mutate(text = str_replace_all(text, 
                                &quot;https://t.co/[A-Za-z\\d]+|&amp;amp;&quot;, 
                                &quot;&quot;)) %&gt;%
  unnest_tokens(word, text, 
                token = &quot;regex&quot;, 
                pattern = reg) %&gt;%
  filter(!word %in% stop_words$word,
         str_detect(word, &quot;[a-z]&quot;))

# Inspect the first six rows of tweet_words
head(fb_words)</code></pre>
<pre><code>## # A tibble: 6 x 4
##   status_id            source          created_at          word        
##   &lt;chr&gt;                &lt;chr&gt;           &lt;dttm&gt;              &lt;chr&gt;       
## 1 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 ramadan     
## 2 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 mubarak     
## 3 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 0001f319    
## 4 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 #monthofgood
## 5 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 check       
## 6 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 kindness</code></pre>
<pre class="r"><code>fb_words %&gt;%
  count(word, sort = TRUE) %&gt;%
  head(20) %&gt;%
  mutate(word = reorder(word, n)) %&gt;%
  ggplot(aes(x = word, y = n)) +
  geom_bar(stat = &quot;identity&quot;) +
  ylab(&quot;Occurrences&quot;) +
  coord_flip()</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>tiktok_words %&gt;%
  count(word, sort = TRUE) %&gt;%
  head(20) %&gt;%
  mutate(word = reorder(word, n)) %&gt;%
  ggplot(aes(x = word, y = n)) +
  geom_bar(stat = &quot;identity&quot;) +
  ylab(&quot;Occurrences&quot;) +
  coord_flip()</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
<pre class="r"><code>fb_sentiment &lt;-    
 inner_join(fb_words, nrc, by = &quot;word&quot;) %&gt;% 
            group_by(sentiment)  

tiktok_sentiment &lt;-    
 inner_join(tiktok_words, nrc, by = &quot;word&quot;) %&gt;% 
            group_by(sentiment) 

fb_words %&gt;% head()</code></pre>
<pre><code>## # A tibble: 6 x 4
##   status_id            source          created_at          word        
##   &lt;chr&gt;                &lt;chr&gt;           &lt;dttm&gt;              &lt;chr&gt;       
## 1 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 ramadan     
## 2 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 mubarak     
## 3 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 0001f319    
## 4 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 #monthofgood
## 5 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 check       
## 6 x1382020080343470082 Twitter Web App 2021-04-13 17:17:18 kindness</code></pre>
<p>Here we compare the sentiment between Facebook and TikTok. It looks like discussions surrounding Facebook uses more trust words while topics about TikTok uses more words that reflect anticipation.</p>
<pre class="r"><code>fb_sentiment_analysis &lt;- fb_sentiment %&gt;% 
  count(word, sentiment) %&gt;% 
  group_by(sentiment)

fb_sentiment_analysis %&gt;%  
  top_n(15) %&gt;% 
  ggplot(aes(x = sentiment, y = n )) +
  geom_bar(stat = &quot;identity&quot;) +
  coord_flip() +
  ylab(&quot;Frequency&quot;) +
  xlab(&quot;Sentiment&quot;) +
  labs(title=&quot;Facebook Sentiment&quot;)</code></pre>
<pre><code>## Selecting by n</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<pre class="r"><code>tiktok_sentiment_analysis &lt;- tiktok_sentiment %&gt;% 
  count(word, sentiment) %&gt;% 
  group_by(sentiment)

tiktok_sentiment_analysis %&gt;%  
  top_n(15) %&gt;% 
  ggplot(aes(x = sentiment, y = n )) +
  geom_bar(stat = &quot;identity&quot;) +
  coord_flip() +
  ylab(&quot;Frequency&quot;) +
  xlab(&quot;Sentiment&quot;) +
  labs(title=&quot;TikTok Sentiment&quot;)</code></pre>
<pre><code>## Selecting by n</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
<pre class="r"><code>fb_sentiment_analysis %&gt;% filter(!sentiment %in% c(&quot;positive&quot;, &quot;negative&quot;)) %&gt;% 
  mutate(sentiment = reorder(sentiment, -n),
         word = reorder(word, -n)) %&gt;% top_n(10) -&gt; fb_sentiment_analysis2</code></pre>
<pre><code>## Selecting by n</code></pre>
<pre class="r"><code>ggplot(fb_sentiment_analysis2, aes(x=word, y=n, fill = n)) +
  facet_wrap(~ sentiment, scales = &quot;free&quot;)+ 
  geom_bar(stat =&quot;identity&quot;) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) + 
  labs(y=&quot;count&quot;, title=&quot;Facebook Sentiment&quot;)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<pre class="r"><code>tiktok_sentiment_analysis %&gt;% filter(!sentiment %in% c(&quot;positive&quot;, &quot;negative&quot;)) %&gt;% 
  mutate(sentiment = reorder(sentiment, -n),
         word = reorder(word, -n)) %&gt;% top_n(10) -&gt; tiktok_sentiment_analysis2</code></pre>
<pre><code>## Selecting by n</code></pre>
<pre class="r"><code>ggplot(tiktok_sentiment_analysis2, aes(x=word, y=n, fill = n)) +
  facet_wrap(~ sentiment, scales = &quot;free&quot;)+ 
  geom_bar(stat =&quot;identity&quot;) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) + 
  labs(y=&quot;count&quot;, title=&quot;Tik Tok Sentiment&quot;)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-11-2.png" width="672" /></p>
<p>We also want to visualize common words on Facebook and Tiktok by Wordcloud. The visual depiction indicates to us that “learn”, “center” and “report” are common words, with more secondary common words such as “secure” page“, and”visit" for Facebook account engagement. This could be that Facebook users tweet about account issues. Whereas, TikTok has “top”, “tomorrow”, and “prizes” as common words, and more secondary common words such as “winner,”nominating“, and”grand", indicating that the social media platform likes to promote competitions or giveaways, which makes sense given their younger demographics might enjoy these types of rewards and games.</p>
<pre class="r"><code>facebook_cloud &lt;- fb_words  %&gt;% count(word) %&gt;% arrange(-n)
wordcloud(facebook_cloud$word, facebook_cloud$n, max.words = 200, colors = c(&quot;#00B2FF&quot;, &quot;red&quot;, &quot;#FF0099&quot;, &quot;#6600CC&quot;, &quot;green&quot;, &quot;orange&quot;, &quot;blue&quot;, &quot;brown&quot;))</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<pre class="r"><code>tiktok_cloud &lt;- tiktok_words  %&gt;% count(word) %&gt;% arrange(-n)
wordcloud(tiktok_cloud$word, tiktok_cloud$n, max.words = 200, colors = c(&quot;#00B2FF&quot;, &quot;red&quot;, &quot;#FF0099&quot;, &quot;#6600CC&quot;, &quot;green&quot;, &quot;orange&quot;, &quot;blue&quot;, &quot;brown&quot;))</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-12-2.png" width="672" /></p>
<p>Next, we examine texts on Facebook and Tiktok to see their positive-negative score by using the AFINN sentiment lexicon, a list of English terms manually rated for valence with an integer between -5 (negative) and +5 (positive) by Finn Årup Nielsen between 2009 and 2011.</p>
<p>We use this lexicon to compute mean positivity scores for all words tweeted by each user.</p>
<pre class="r"><code># run this to get afinn lexicon and save it as a csv
# get_sentiments (&quot;afinn&quot;) -&gt; afinn
#
#afinn %&gt;% write_as_csv(&quot;afinn.csv&quot;)
afinn &lt;- read_csv(&#39;afinn.csv&#39;)
fb_afinn &lt;-    
 inner_join(fb_words, 
            afinn, 
            by = &quot;word&quot;) 
tiktok_afinn &lt;-    
 inner_join(tiktok_words, 
            afinn, 
            by = &quot;word&quot;)
fb_mean_afinn &lt;- 
  fb_afinn %&gt;% 
  summarise(mean_fb_afinn = mean(value))
tiktok_mean_afinn &lt;- 
  tiktok_afinn %&gt;% 
  summarise(mean_tt_afinn = mean(value))
cat(paste0(&quot;Average AFINN scores for all words by user\n&quot;,
           &quot;\nFacebook: &quot;, round(fb_mean_afinn, 3), 
           &quot;\nTikTok: &quot;, round(tiktok_mean_afinn, 3)))</code></pre>
<pre><code>## Average AFINN scores for all words by user
## 
## Facebook: 0.785
## TikTok: 1.704</code></pre>
<p>Facebook’s mean AFINN value is 0.79 while TikTok’s mean AFINN value is 1.704. In general, words tweeted by Tiktok are more positive than those tweeted by Facebook.</p>
</div>
<div id="training-predictive-models" class="section level1">
<h1>Training Predictive Models</h1>
<p>Here, using the text of a tweet, we attempt to predict the user who tweeted it.</p>
<p>The features we extracted are tweet length, the presence of a picture/link, number of words for each sentiment, and mean AFINN score per tweet.</p>
<p>TikTok is encoded as 1, and Facebook is encoded as 0.</p>
<p>First, we produce a simple decision tree.</p>
<pre class="r"><code>fb_piclinks &lt;-
  facebook %&gt;%
  filter(!str_detect(text, &#39;^&quot;&#39;)) %&gt;%
  mutate(picture_link = ifelse(str_detect(text, &quot;t.co&quot;),
                         1, 0)) %&gt;% 
  select(1,5)
tiktok_piclinks &lt;- 
  tiktok %&gt;%
  filter(!str_detect(text, &#39;^&quot;&#39;)) %&gt;%
  mutate(picture_link = ifelse(str_detect(text, &quot;t.co&quot;),
                         1, 0)) %&gt;% 
  select(1,5)
fb_tweet_afinn &lt;- 
  fb_afinn %&gt;% 
  group_by(status_id) %&gt;% 
  summarize(afinn = mean(value))</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre class="r"><code>tiktok_tweet_afinn &lt;- 
  tiktok_afinn %&gt;% 
  group_by(status_id) %&gt;% 
  summarize(afinn = mean(value))</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre class="r"><code>fb_sentiment_counts &lt;- 
  fb_sentiment %&gt;% 
  group_by(status_id) %&gt;% 
  count(sentiment) %&gt;% 
  pivot_wider(id_cols = status_id, 
              names_from = sentiment, 
              values_from = n,
              values_fill = 0)
tiktok_sentiment_counts &lt;- 
  tiktok_sentiment %&gt;% 
  group_by(status_id) %&gt;% 
  count(sentiment) %&gt;% 
  pivot_wider(id_cols = status_id, 
              names_from = sentiment, 
              values_from = n,
              values_fill = 0)
tiktok_feature_selection &lt;- 
  tiktok_wordcounts %&gt;% 
  mutate(user = 1) %&gt;% 
  left_join(tiktok_sentiment_counts, 
            by=&quot;status_id&quot;) %&gt;% 
  left_join(tiktok_tweet_afinn,
            by=&quot;status_id&quot;) %&gt;% 
  left_join(tiktok_piclinks,
            by=&quot;status_id&quot;)
facebook_feature_selection &lt;-
  fb_wordcounts %&gt;% 
  mutate(user = 0) %&gt;% 
  left_join(fb_sentiment_counts, 
            by=&quot;status_id&quot;) %&gt;% 
  left_join(fb_tweet_afinn,
            by=&quot;status_id&quot;) %&gt;% 
  left_join(fb_piclinks,
            by=&quot;status_id&quot;)
both_users &lt;- 
  tiktok_feature_selection %&gt;% 
  rbind(facebook_feature_selection) %&gt;%
  mutate_if(is.numeric,coalesce,0)
set.seed(123)
index &lt;- 
  createDataPartition(both_users$user,
                      p = 0.8, list = FALSE)
for_decisiontree &lt;-
  both_users %&gt;% select(-1,-2,-3,-4) %&gt;% 
  drop_na()
train &lt;- for_decisiontree[index, ]</code></pre>
<pre><code>## Warning: The `i` argument of ``[`()` can&#39;t be a matrix as of tibble 3.0.0.
## Convert to a vector.
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_warnings()` to see where this warning was generated.</code></pre>
<pre class="r"><code>test  &lt;- for_decisiontree[-index, ]
set.seed(123)
simple_model &lt;- rpart(user ~ ., 
                      data = train, method = &quot;class&quot;)
rpart.plot(simple_model, yesno = 2)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>We produce additional models using the bagging, random forests, and gradient boosting methods.</p>
<pre class="r"><code>set.seed(123)
bagging_model &lt;- train(
  user ~ .,
  data = train,
  method = &quot;treebag&quot;,
  trControl = trainControl(method = &quot;oob&quot;),
  keepX = T,
  nbagg = 100,
  importance = &quot;impurity&quot;,
  control = rpart.control(minsplit = 2, cp = 0)
)
n_features &lt;- length(setdiff(names(train), &quot;user&quot;))
rf_model &lt;- ranger(
  user ~ .,
  data = train,
  mtry = floor(n_features * 0.5),
  respect.unordered.factors = &quot;order&quot;,
  importance = &quot;permutation&quot;,
  seed = 123
)
set.seed(123)  # for reproducibility
gbm_model &lt;- gbm(
  formula = user ~ .,
  data = train,
  distribution = &quot;gaussian&quot;,  # SSE loss function
  n.trees = 1000,
  shrinkage = 0.05,
  interaction.depth = 5,
  n.minobsinnode = 4,
  cv.folds = 10
)</code></pre>
<p>We also display four variable importance plots to see which variables each model identified as significant.</p>
<pre class="r"><code>vip(simple_model, num_features = 30) + ggtitle(&#39;Simple Decision Tree - Variable Importance Plot&#39;)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<pre class="r"><code>vip(bagging_model, num_features = 30) + ggtitle(&#39;Bagging - Variable Importance Plot&#39;)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-16-2.png" width="672" /></p>
<pre class="r"><code>vip(rf_model, num_features = 30) + ggtitle(&#39;Random Forests - Variable Importance Plot&#39;)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-16-3.png" width="672" /></p>
<pre class="r"><code>vip(gbm_model, num_features = 30) + ggtitle(&#39;Gradient Boosting - Variable Importance Plot&#39;)</code></pre>
<p><img src="HW09_files/figure-html/unnamed-chunk-16-4.png" width="672" /></p>
<p>It seems that the simple decision tree placed the most importance on the presence of a picture/link. The bagging model, on the other hand places no importance on this variable. All four methods identified tweet length as strongly predictive of the user. All four heavily weighted anticipation sentiments and AFINN scores.</p>
</div>
<div id="results-and-discussion" class="section level1">
<h1>Results and Discussion</h1>
<p>Now, we produce confusion matrices and show residual sum of squares for all tree-based methods—first evaluating their performance on the training set and then on the test set. Note again that a Tiktok tweet is encoded as 1, and a Facebook tweet is encoded as 0. The code is shown for the first matrix but not for subsequent ones for the sake of elegance.</p>
<div id="training-set-performance" class="section level2">
<h2>Training Set Performance</h2>
<p><strong>Simple Decision Tree - Training Set:</strong></p>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    0    1
##          0 2215  583
##          1  332 1984
##                                           
##                Accuracy : 0.8211          
##                  95% CI : (0.8103, 0.8315)
##     No Information Rate : 0.502           
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
##                                           
##                   Kappa : 0.6423          
##                                           
##  Mcnemar&#39;s Test P-Value : &lt; 2.2e-16       
##                                           
##               Precision : 0.7916          
##                  Recall : 0.8697          
##                      F1 : 0.8288          
##              Prevalence : 0.4980          
##          Detection Rate : 0.4331          
##    Detection Prevalence : 0.5471          
##       Balanced Accuracy : 0.8213          
##                                           
##        &#39;Positive&#39; Class : 0               
## </code></pre>
<p><strong>Bagging Method - Training Set:</strong></p>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    0    1
##          0 2458   57
##          1   89 2510
##                                           
##                Accuracy : 0.9715          
##                  95% CI : (0.9665, 0.9758)
##     No Information Rate : 0.502           
##     P-Value [Acc &gt; NIR] : &lt;2e-16          
##                                           
##                   Kappa : 0.9429          
##                                           
##  Mcnemar&#39;s Test P-Value : 0.0103          
##                                           
##               Precision : 0.9773          
##                  Recall : 0.9651          
##                      F1 : 0.9712          
##              Prevalence : 0.4980          
##          Detection Rate : 0.4806          
##    Detection Prevalence : 0.4918          
##       Balanced Accuracy : 0.9714          
##                                           
##        &#39;Positive&#39; Class : 0               
## </code></pre>
<p><strong>Random Forests Method - Training Set:</strong></p>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    0    1
##          0 2410   99
##          1  137 2468
##                                           
##                Accuracy : 0.9539          
##                  95% CI : (0.9477, 0.9594)
##     No Information Rate : 0.502           
##     P-Value [Acc &gt; NIR] : &lt; 2e-16         
##                                           
##                   Kappa : 0.9077          
##                                           
##  Mcnemar&#39;s Test P-Value : 0.01602         
##                                           
##               Precision : 0.9605          
##                  Recall : 0.9462          
##                      F1 : 0.9533          
##              Prevalence : 0.4980          
##          Detection Rate : 0.4713          
##    Detection Prevalence : 0.4906          
##       Balanced Accuracy : 0.9538          
##                                           
##        &#39;Positive&#39; Class : 0               
## </code></pre>
<p><strong>Gradient Boosting Method - Training Set:</strong></p>
<pre><code>## Using 806 trees...</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    0    1
##          0 2297  303
##          1  250 2264
##                                          
##                Accuracy : 0.8919         
##                  95% CI : (0.883, 0.9002)
##     No Information Rate : 0.502          
##     P-Value [Acc &gt; NIR] : &lt; 2e-16        
##                                          
##                   Kappa : 0.7837         
##                                          
##  Mcnemar&#39;s Test P-Value : 0.02702        
##                                          
##               Precision : 0.8835         
##                  Recall : 0.9018         
##                      F1 : 0.8926         
##              Prevalence : 0.4980         
##          Detection Rate : 0.4492         
##    Detection Prevalence : 0.5084         
##       Balanced Accuracy : 0.8919         
##                                          
##        &#39;Positive&#39; Class : 0              
## </code></pre>
<p><strong>Performance Summary and RSS</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
type
</th>
<th style="text-align:right;">
total_errors
</th>
<th style="text-align:right;">
accuracy
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Simple
</td>
<td style="text-align:right;">
915
</td>
<td style="text-align:right;">
0.8210794
</td>
</tr>
<tr>
<td style="text-align:left;">
Bagging
</td>
<td style="text-align:right;">
146
</td>
<td style="text-align:right;">
0.9714509
</td>
</tr>
<tr>
<td style="text-align:left;">
Random Forests
</td>
<td style="text-align:right;">
236
</td>
<td style="text-align:right;">
0.9538522
</td>
</tr>
<tr>
<td style="text-align:left;">
Gradient Boosting
</td>
<td style="text-align:right;">
553
</td>
<td style="text-align:right;">
0.8918655
</td>
</tr>
</tbody>
</table>
<p>The rankings for accuracy on the training set are as follows: 1. Bagging method 2. Random forests 3. Gradient boosting method 4. Simple decision tree</p>
<p>We show the residual sum of squares for all four models on the training set below.</p>
<pre class="r"><code>rss_simple_train &lt;- sum((actual_train-simple_pred_train)^2)
rss_bagging_train &lt;- sum((actual_train-bagging_pred_train)^2)
rss_rf_train &lt;- sum((actual_train-rf_pred_train)^2)
rss_gb_train &lt;- sum((actual_train-gb_pred_train)^2)
cat(paste0(&quot;Residual Sum of Squares on Training Set\n&quot;,
           &quot;\nSimple model: &quot;, rss_simple_train, 
           &quot;\nBagging model: &quot;, rss_bagging_train, 
           &quot;\nRandom forests model: &quot;, rss_rf_train, 
           &quot;\nGradient boosting model: &quot;, rss_gb_train))</code></pre>
<pre><code>## Residual Sum of Squares on Training Set
## 
## Simple model: 744.823130490417
## Bagging model: 148.955784690615
## Random forests model: 226.599946610086
## Gradient boosting model: 407.58762929458</code></pre>
<p>The bagging model performed the best on the training set, followed by the random forests method, the gradient boosting method, and the simple model in last place.</p>
<p>Now, we show confusion matrices for the test set.</p>
</div>
<div id="test-set-performance" class="section level2">
<h2>Test Set Performance</h2>
<p><strong>Simple Decision Tree - Test Set:</strong></p>
<pre class="r"><code>actual_test &lt;- test$user
simple_pred_test &lt;- 
  predict(simple_model, newdata = test) %&gt;% 
  as_tibble() %&gt;% 
  select(2) %&gt;% 
  unlist() %&gt;% 
  as.vector()
simple_test_confusion &lt;- 
  confusionMatrix(data = factor(round(simple_pred_test)),
                  reference = factor(actual_test), mode = &quot;prec_recall&quot;)
simple_test_errors &lt;- 
  simple_test_confusion$table[2] +
  simple_test_confusion$table[3]
simple_test_accuracy &lt;-
  as.numeric(simple_test_confusion$overall[1])
simple_test_confusion</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction   0   1
##          0 562 138
##          1  89 489
##                                          
##                Accuracy : 0.8224         
##                  95% CI : (0.8003, 0.843)
##     No Information Rate : 0.5094         
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16      
##                                          
##                   Kappa : 0.6441         
##                                          
##  Mcnemar&#39;s Test P-Value : 0.001443       
##                                          
##               Precision : 0.8029         
##                  Recall : 0.8633         
##                      F1 : 0.8320         
##              Prevalence : 0.5094         
##          Detection Rate : 0.4397         
##    Detection Prevalence : 0.5477         
##       Balanced Accuracy : 0.8216         
##                                          
##        &#39;Positive&#39; Class : 0              
## </code></pre>
<p><strong>Bagging Method - Test Set:</strong></p>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction   0   1
##          0 550  92
##          1 101 535
##                                           
##                Accuracy : 0.849           
##                  95% CI : (0.8282, 0.8682)
##     No Information Rate : 0.5094          
##     P-Value [Acc &gt; NIR] : &lt;2e-16          
##                                           
##                   Kappa : 0.6979          
##                                           
##  Mcnemar&#39;s Test P-Value : 0.5647          
##                                           
##               Precision : 0.8567          
##                  Recall : 0.8449          
##                      F1 : 0.8507          
##              Prevalence : 0.5094          
##          Detection Rate : 0.4304          
##    Detection Prevalence : 0.5023          
##       Balanced Accuracy : 0.8491          
##                                           
##        &#39;Positive&#39; Class : 0               
## </code></pre>
<p><strong>Random Forests Method - Test Set:</strong></p>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction   0   1
##          0 567  87
##          1  84 540
##                                           
##                Accuracy : 0.8662          
##                  95% CI : (0.8463, 0.8844)
##     No Information Rate : 0.5094          
##     P-Value [Acc &gt; NIR] : &lt;2e-16          
##                                           
##                   Kappa : 0.7323          
##                                           
##  Mcnemar&#39;s Test P-Value : 0.8784          
##                                           
##               Precision : 0.8670          
##                  Recall : 0.8710          
##                      F1 : 0.8690          
##              Prevalence : 0.5094          
##          Detection Rate : 0.4437          
##    Detection Prevalence : 0.5117          
##       Balanced Accuracy : 0.8661          
##                                           
##        &#39;Positive&#39; Class : 0               
## </code></pre>
<p><strong>Gradient Boosting Method - Test Set:</strong></p>
<pre><code>## Using 806 trees...</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction   0   1
##          0 568  93
##          1  83 534
##                                           
##                Accuracy : 0.8623          
##                  95% CI : (0.8422, 0.8807)
##     No Information Rate : 0.5094          
##     P-Value [Acc &gt; NIR] : &lt;2e-16          
##                                           
##                   Kappa : 0.7244          
##                                           
##  Mcnemar&#39;s Test P-Value : 0.4975          
##                                           
##               Precision : 0.8593          
##                  Recall : 0.8725          
##                      F1 : 0.8659          
##              Prevalence : 0.5094          
##          Detection Rate : 0.4444          
##    Detection Prevalence : 0.5172          
##       Balanced Accuracy : 0.8621          
##                                           
##        &#39;Positive&#39; Class : 0               
## </code></pre>
<p><strong>Performance Summary and RSS</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
type
</th>
<th style="text-align:right;">
total_errors
</th>
<th style="text-align:right;">
accuracy
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Simple
</td>
<td style="text-align:right;">
227
</td>
<td style="text-align:right;">
0.8223787
</td>
</tr>
<tr>
<td style="text-align:left;">
Bagging
</td>
<td style="text-align:right;">
193
</td>
<td style="text-align:right;">
0.8489828
</td>
</tr>
<tr>
<td style="text-align:left;">
Random Forests
</td>
<td style="text-align:right;">
171
</td>
<td style="text-align:right;">
0.8661972
</td>
</tr>
<tr>
<td style="text-align:left;">
Gradient Boosting
</td>
<td style="text-align:right;">
176
</td>
<td style="text-align:right;">
0.8622848
</td>
</tr>
</tbody>
</table>
<p>The rankings for accuracy on the test set are as follows:</p>
<ol style="list-style-type: decimal">
<li>Random forests</li>
<li>Gradient boosting method</li>
<li>Bagging method</li>
<li>Simple decision tree</li>
</ol>
<p>Now, we show the residual sum of squares for each model with respect to the test set.</p>
<pre class="r"><code>rss_simple_test &lt;- sum((actual_test-simple_pred_test)^2)
rss_bagging_test &lt;- sum((actual_test-bagging_pred_test)^2)
rss_rf_test &lt;- sum((actual_test-rf_pred_test)^2)
rss_gb_test &lt;- sum((actual_test-gb_pred_test)^2)
cat(paste0(&quot;Residual Sum of Squares on Test Set\n&quot;,
           &quot;\nSimple model: &quot;, rss_simple_test, 
           &quot;\nBagged model: &quot;, rss_bagging_test, 
           &quot;\nRandom forests model: &quot;, rss_rf_test, 
           &quot;\nGradient boost model: &quot;, rss_gb_test))</code></pre>
<pre><code>## Residual Sum of Squares on Test Set
## 
## Simple model: 185.903238689494
## Bagged model: 137.082023601223
## Random forests model: 120.747112472235
## Gradient boost model: 132.480675055803</code></pre>
</div>
<div id="iii.-results" class="section level2">
<h2>III. Results</h2>
<p>Our sentiment analyses indicate that there are differences in sentiments of tweet communications between Tiktok and Facebook account. In general, while discussions surrounding Facebook uses more trust words, topics about TikTok uses more words that reflect anticipation. Tweets from Tiktok are more positive than those on Facebook. The random forests model performed the best on the test set even though it was only second best for the training set. However, that may be an indication that the bagging model was overfit to the training data, which caused it to perform worse on the test set than the random forests model.</p>
<p>When testing the models on our test data sets, for the simple model we observed 82.24% accuracy, for the bagging model we observed 84.9% accuracy, for the random forest we observed 86.62% accuracy, and for the gradient boosting model we observed 86.23% accuracy. Another good metric to compare is balanced accuracy, which is the average of specificity and sensitivity. For the simple model, balanced accuracy is 82.16%. For the bagging model, balanced accuracy is 84.91%. For the random forest, balanced accuracy is 86.61%. For the gradient boosting model, balanced accuracy is 86.21%.</p>
<p>In sum, it seems that the best model is the random forests model, with a test set accuracy score of 86.62%.</p>
<p>When analyzing the sum of squares difference between the actual tweeter and the predicted tweeter, the results were as follows:</p>
<p>Simple model: 744.823130490417</p>
<p>Bagging model: 148.955784690615</p>
<p>Random forests model: 226.599946610086</p>
<p>Gradient boosting model: 407.58762929458</p>
</div>
<div id="iv.-conclusion" class="section level2">
<h2>IV. Conclusion</h2>
<p>Looking at the analyses, it seems that the Facebook and TikTok accounts have systematically different Twitter presences. Facebook seems to respond more frequently to user fears, which are associated with words such as “secure” and “trust.” Whereas, TikTok focuses on generating excitement and offer prize giveaways, which is associated with “anticipation” words such as “winning” and “tomorrow.” Differences in tweet length also possibly reflect on the preferences of the target audience; TikTok users are younger and less likely to consume written information (it is a video platform, after all), and the opposite is true for Facebook. In sum, our predictive endeavor was successful, and we unveiled a number of useful insights from it.</p>
</div>
<div id="v.-contributions" class="section level2">
<h2>V. Contributions</h2>
<p>Ammar Plumber, Elaina Lin, Kim Nguyen, Meghan Aines, Ryan Karbowicz</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
